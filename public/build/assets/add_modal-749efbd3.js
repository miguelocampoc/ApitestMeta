import{H as i,e as l,a as o,l as c,K as m,o as _}from"./app-62178382.js";import{_ as p}from"./_plugin-vue_export-helper-c27b6911.js";const h={methods:{SaveOrcid(e){this.form.orcid_identifier_path=e["orcid-identifier"].path,this.form.given_names=e.person.name["given-names"].value,this.form.family_name=e.person.name["family-name"].value,e.person.emails.email.length>0&&(this.form.email_primary=this.getEmailPrimary(e.person.emails.email)[0].email),i.post("api/orcid/create",this.form).then(t=>{let r=t.data;this.UpdateKeywords(e.person.keywords.keyword,r),this.SendKeywords(),this.$emit("orcid_list_event"),Swal.fire({position:"center",icon:"success",title:"Registro Agregado",showConfirmButton:!1,timer:1500})}).catch(t=>{})},GetExternalOrcid(){i.get(this.url_external_orcid+this.orcid_identifier_path,{headers:{Accept:"application/json"}}).then(e=>{this.SaveOrcid(e.data)}).catch(e=>{console.log("No se encontro el orcid suministrado")})},getEmailPrimary(e){return e.filter(function(t){return t.primary===!0})},UpdateKeywords(e,t){e.forEach(r=>{let a={orcid_id:t,content:r.content};this.formKeyword.keyword_content.push(a)})},SendKeywords(){i.post("api/keyword/create",this.formKeyword).then(e=>{console.log("guardado de keywords exitoso")}).catch(e=>{console.log("fallo al guardar las keywords")})}},data(){return{orcid_identifier_path:"",url_external_orcid:"https://pub.orcid.org/v3.0/",errors:"",keyword_content:"",form:{orcid_identifier_path:"",given_names:"",family_name:"",email_primary:""},formKeyword:{keyword_content:[]}}}},f={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},u={class:"modal-dialog"},y={class:"modal-content"},b=o("div",{class:"modal-header"},[o("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Agregar orcid Externo"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),g={class:"modal-body"},v={class:"mb-3"},w=o("label",{for:"recipient-name",class:"col-form-label"},"Ingrese la identificacion de orcid:",-1),x={class:"modal-footer"},k=o("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cerrar",-1);function K(e,t,r,a,s,n){return _(),l("div",f,[o("div",u,[o("div",y,[b,o("div",g,[o("form",null,[o("div",v,[w,c(o("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>s.orcid_identifier_path=d),type:"text",class:"form-control",placeholder:"Agrege el orcid identificador"},null,512),[[m,s.orcid_identifier_path]])])])]),o("div",x,[o("button",{onClick:t[1]||(t[1]=d=>n.GetExternalOrcid()),type:"button",class:"btn btn-primary"},"Guardar"),k])])])])}const A=p(h,[["render",K]]);export{A as default};
